{"ast":null,"code":"import _regeneratorRuntime from\"/Users/hayashiryuunosuke/Public/workspace/chatbot-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/hayashiryuunosuke/Public/workspace/chatbot-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/hayashiryuunosuke/Public/workspace/chatbot-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/hayashiryuunosuke/Public/workspace/chatbot-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/hayashiryuunosuke/Public/workspace/chatbot-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/hayashiryuunosuke/Public/workspace/chatbot-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/hayashiryuunosuke/Public/workspace/chatbot-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import'./assets/styles/style.css';import{db}from'./firebase/index';import{AnswersList,Chats}from'./components/index';var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.displayNextQuestion=function(nextQuestionId){var chats=_this.state.chats;var dataset=_this.state.dataset[nextQuestionId];chats.push({text:dataset.question,type:\"question\"});_this.setState({chats:chats,answers:dataset.answers,currentId:nextQuestionId});};_this.selectAnswer=function(selectedAnswer,nextQuestionId){switch(true){case nextQuestionId===\"init\":setTimeout(function(){return _this.displayNextQuestion(nextQuestionId);},500);break;case /^https*/.test(nextQuestionId):var a=document.createElement('a');a.href=nextQuestionId;a.target='_blank';a.click();break;default:var chats=_this.state.chats;chats.push({text:selectedAnswer,type:\"answer\"});_this.setState({chats:chats});setTimeout(function(){return _this.displayNextQuestion(nextQuestionId);},1000);break;}};_this.state={chats:[],answers:[],currentId:\"init\",dataset:{}};_this.selectAnswer=_this.selectAnswer.bind(_assertThisInitialized(_this));return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var dataset,initAnswer;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dataset=_this2.state.dataset;_context.next=3;return db.collection('questions').get().then(function(snapshots){snapshots.forEach(function(doc){var id=doc.id;var data=doc.data();dataset[id]=data;});});case 3:_this2.initDataset(dataset);initAnswer=\"\";_this2.selectAnswer(initAnswer,_this2.state.currentId);case 6:case\"end\":return _context.stop();}}},_callee);}))();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){var scrollArea=document.getElementById('scroll-area');if(scrollArea){scrollArea.scrollTop=scrollArea.scrollHeight;}}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"section\",{className:\"c-section\"},/*#__PURE__*/React.createElement(\"div\",{className:\"c-box\"},/*#__PURE__*/React.createElement(Chats,{chats:this.state.chats}),/*#__PURE__*/React.createElement(AnswersList,{answers:this.state.answers,select:this.selectAnswer})));}}]);return App;}(React.Component);export{App as default};;","map":{"version":3,"sources":["/Users/hayashiryuunosuke/Public/workspace/chatbot-demo/src/App.jsx"],"names":["React","db","AnswersList","Chats","App","props","displayNextQuestion","nextQuestionId","chats","state","dataset","push","text","question","type","setState","answers","currentId","selectAnswer","selectedAnswer","setTimeout","test","a","document","createElement","href","target","click","bind","collection","get","then","snapshots","forEach","doc","id","data","initDataset","initAnswer","scrollArea","getElementById","scrollTop","scrollHeight","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './assets/styles/style.css'\nimport { db } from './firebase/index'\nimport { AnswersList, Chats } from './components/index'\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      chats: [],\n      answers: [],\n      currentId: \"init\",\n      dataset: {}\n    }\n    this.selectAnswer = this.selectAnswer.bind(this);\n  }\n\n  displayNextQuestion = (nextQuestionId) => {\n    const chats = this.state.chats\n    const dataset = this.state.dataset[nextQuestionId]\n    chats.push({\n      text: dataset.question,\n      type: \"question\"\n    })\n    this.setState({\n      chats: chats,\n      answers: dataset.answers,\n      currentId: nextQuestionId\n    })\n  }\n\n  selectAnswer = (selectedAnswer, nextQuestionId) => {\n    switch (true) {\n      case (nextQuestionId === \"init\"):\n        setTimeout(() => this.displayNextQuestion(nextQuestionId), 500);\n        break;\n\n      case (/^https*/.test(nextQuestionId)):\n        const a = document.createElement('a');\n        a.href = nextQuestionId;\n        a.target = '_blank'\n        a.click();\n        break;\n      default:\n        const chats = this.state.chats\n        chats.push({\n          text: selectedAnswer,\n          type: \"answer\"\n        })\n        this.setState({\n          chats: chats\n        })\n        setTimeout(() => this.displayNextQuestion(nextQuestionId), 1000);\n        break;\n    }\n  }\n\n  componentDidMount() {\n    (async () => {\n      const dataset = this.state.dataset\n\n      await db.collection('questions').get().then(snapshots => {\n        snapshots.forEach(doc => {\n          const id = doc.id\n          const data = doc.data()\n          dataset[id] = data\n        })\n      });\n      this.initDataset(dataset)\n      const initAnswer = \"\"\n      this.selectAnswer(initAnswer, this.state.currentId)\n    })();\n  }\n\n  componentDidUpdate() {\n    const scrollArea = document.getElementById('scroll-area');\n    if (scrollArea) {\n      scrollArea.scrollTop = scrollArea.scrollHeight;\n    }\n  }\n\n  render() {\n    return (\n      <section className=\"c-section\">\n        <div className=\"c-box\">\n          <Chats chats={this.state.chats} />\n          <AnswersList answers={this.state.answers} select={this.selectAnswer} />\n        </div>\n      </section>\n    );\n  }\n};"]},"metadata":{},"sourceType":"module"}